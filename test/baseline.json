{
  "schemaVersion": 2,
  "phase": 1,
  "generatedAt": "2026-02-16T14:15:00Z",
  "commit": "a0c36d92",
  "branch": "claude2",
  "nodeVersion": "v25.6.0",
  "platform": "darwin/arm64",
  "commands": {
    "unit": "node --test test/unit/*.test.js",
    "e2e": "node --test --test-concurrency=1 test/e2e/*.test.js",
    "session": "npm run test:session"
  },
  "session": {
    "durationMs": 4627,
    "total": 178,
    "passed": 141,
    "failed": 37,
    "byType": {
      "chargen": { "total": 91, "passed": 90, "failed": 1 },
      "gameplay": { "total": 18, "passed": 1, "failed": 17 },
      "map": { "total": 10, "passed": 1, "failed": 9 },
      "special": { "total": 50, "passed": 49, "failed": 1 },
      "interface": { "total": 3, "passed": 1, "failed": 2 },
      "option_test": { "total": 6, "passed": 0, "failed": 6 }
    },
    "sentinelSessions": [
      {
        "session": "seed1_chargen_valkyrie.session.json",
        "type": "chargen",
        "passed": true,
        "note": "Chargen sentinel - valkyrie human female neutral"
      },
      {
        "session": "seed1_gameplay.session.json",
        "type": "gameplay",
        "passed": false,
        "note": "Gameplay sentinel - currently failing RNG divergence"
      },
      {
        "session": "seed72_map.session.json",
        "type": "map",
        "passed": true,
        "note": "Map sentinel - single depth, passing"
      },
      {
        "session": "seed1_special_castle.session.json",
        "type": "special",
        "passed": true,
        "note": "Special level sentinel - castle"
      },
      {
        "session": "interface_chargen.session.json",
        "type": "interface",
        "passed": true,
        "note": "Interface sentinel - chargen screen"
      }
    ],
    "knownFailures": {
      "gameplay": "All gameplay sessions fail with RNG divergence at step 0",
      "map": "Most map sessions fail with RNG divergence (themerms)",
      "special": "seed42_special_castle fails grid mismatch",
      "chargen": "seed300_chargen_tourist fails with totable error",
      "interface": "interface_options/startup fail RNG mismatch"
    }
  },
  "fileBaselines": {
    "js/headless_runtime.js": {
      "lines": 1102,
      "role": "Core game headless support + replay API (expanded in Phase 1)"
    },
    "test/comparison/session_runtime.js": {
      "lines": 1457,
      "role": "Game-aware test code - target for elimination"
    },
    "test/comparison/session_helpers.js": {
      "lines": 41,
      "role": "Re-exports facade - game-unaware"
    },
    "test/comparison/comparators.js": {
      "lines": 150,
      "role": "Pure comparison functions - game-unaware"
    },
    "test/comparison/session_loader.js": {
      "lines": 200,
      "role": "Session file loading - game-unaware"
    }
  },
  "exitCriteria": {
    "phase0": "Baseline artifact exists for regression comparison",
    "phase0_achieved": true,
    "phase1": "Core exposes stable replay API used by tests without harness gameplay imports",
    "phase1_achieved": true,
    "phase1_commit": "a0c36d92",
    "phase1_additions": [
      "HeadlessGame.start(seed, options)",
      "sendKey() / sendKeys()",
      "getTypGrid() / getScreen() / getAnsiScreen()",
      "enableRngLogging() / getRngLog() / clearRngLog()",
      "teleportToLevel() / revealMap()",
      "checkpoint()",
      "23 unit tests for replay API"
    ]
  }
}

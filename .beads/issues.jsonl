{"id":"interface-060","title":"Port Medusa level to JavaScript","description":"Port Medusa level to JavaScript. Island map with Medusa boss, statues, and water. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.11224964-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:53.11224964-05:00","labels":["complex","port-level","tier3"],"dependencies":[{"issue_id":"interface-060","depends_on_id":"interface-qah","type":"blocks","created_at":"2026-02-09T08:14:35.388127229-05:00","created_by":"David Bau"},{"issue_id":"interface-060","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.462245613-05:00","created_by":"David Bau"},{"issue_id":"interface-060","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.890310351-05:00","created_by":"David Bau"}]}
{"id":"interface-0yz","title":"Implement des.* API rooms and features (des.room, des.door, des.stair, des.ladder)","description":"Extend js/sp_lev.js with room and structural feature functions: des.room() for creating rooms with contents callbacks, des.door() for placing doors, des.stair() for placing stairs/branch connections, des.ladder() for ladders. Needed for Oracle, Mines, and most levels beyond pure maps.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:33.155550195-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:33.155550195-05:00","labels":["des-api","infrastructure"],"dependencies":[{"issue_id":"interface-0yz","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.540816241-05:00","created_by":"David Bau"},{"issue_id":"interface-0yz","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:14.661163928-05:00","created_by":"David Bau"}]}
{"id":"interface-14z","title":"Implement food consumption system (eating)","description":"Complete implementation of the eating/food consumption system.\n\nComponents:\n- Eat command (e key) with item selection\n- Food nutrition values and hunger system\n- BUC status affects nutrition (blessed +1/3, cursed -1/3)\n- Special food effects (corpses, tins, special foods)\n- Eating duration (multi-turn occupation)\n- Choking on food (eating when satiated)\n- Vomiting and food poisoning\n\nC reference:\n- eat.c: all eating logic\n- you.h: hunger states (SATIATED, NOT_HUNGRY, HUNGRY, WEAK, FAINTING)\n\nTest cases:\n- Basic eating completes and restores nutrition\n- Blessed food gives extra nutrition\n- Cursed food gives less nutrition\n- Corpse effects (intrinsics, poisoning, sickness)\n- Cannot eat when satiated (or choke)","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:24:43.447248581-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:24:43.447248581-05:00","dependencies":[{"issue_id":"interface-14z","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:30.877423094-05:00","created_by":"David Bau"}]}
{"id":"interface-1u3","title":"Port Oracle level to JavaScript","description":"Port the Oracle level to JavaScript. Fixed room layout with Oracle NPC, fountains, and supply chest. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.832741435-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:52.832741435-05:00","labels":["port-level","tier2"],"dependencies":[{"issue_id":"interface-1u3","depends_on_id":"interface-qah","type":"blocks","created_at":"2026-02-09T08:14:34.734489317-05:00","created_by":"David Bau"},{"issue_id":"interface-1u3","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T08:14:34.805151325-05:00","created_by":"David Bau"},{"issue_id":"interface-1u3","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.487324187-05:00","created_by":"David Bau"}]}
{"id":"interface-1xn","title":"Port Sokoban levels (soko1-4, a/b variants) to JavaScript","description":"Port the 8 Sokoban level Lua files to JavaScript. These are pure ASCII map levels with fixed layouts — the simplest special levels. Each has a map, boulders, traps (holes/pits), stairs, and a prize container. Test against C traces. First special level to get working end-to-end.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.629304888-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.617385476-05:00","closed_at":"2026-02-09T14:06:46.816371777-05:00","labels":["port-level"],"dependencies":[{"issue_id":"interface-1xn","depends_on_id":"interface-650","type":"blocks","created_at":"2026-02-09T08:14:34.259891516-05:00","created_by":"David Bau"},{"issue_id":"interface-1xn","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:34.333106191-05:00","created_by":"David Bau"}]}
{"id":"interface-343","title":"Implement tool usage (apply command)","description":"Implement the apply command for using tools and special items.\n\nComponents:\n- Apply command (a key) with tool selection\n- All tool types and their uses\n- Tool charges/uses (limited durability)\n- Special tool interactions (digging, unlocking, etc.)\n\nKey tools:\n- Pickaxe, mattock (digging through walls)\n- Key, lock pick, credit card (unlocking doors/containers)\n- Tinning kit (tin corpses)\n- Magic marker (write scrolls)\n- Lamp, lantern (light sources, need oil)\n- Bag of holding, sack (containers)\n- Stethoscope (examine monsters)\n- Unicorn horn (cure poison/sickness)\n\nC reference:\n- apply.c: doapply(), tool-specific functions\n- dig.c: digging mechanics\n\nTest cases:\n- Pickaxe digs through walls (multi-turn)\n- Lock pick opens locked doors/boxes\n- Magic marker writes scrolls (consumes ink)\n- Lamp provides light, runs out of oil\n- Blessed unicorn horn cures more conditions","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:45.180043096-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:45.180043096-05:00","dependencies":[{"issue_id":"interface-343","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:31.384609798-05:00","created_by":"David Bau"}]}
{"id":"interface-3br","title":"Complete special level system for all dungeon branches","description":"Epic tracking implementation of all NetHack special levels across 8 dungeon branches.\n\n**Scope:**\n- Dungeons of Doom: rogue, oracle, bigroom, medusa, castle\n- Gehennom: valley, sanctum, wizard1-3, demon lairs (juiblex, baalzebub, asmodeus, orcus)\n- Gnomish Mines: minetown variants, mines end variants\n- Quest: 13 roles × 3 levels (start/locate/goal)\n- Sokoban: ✓ COMPLETE (soko1-4, a/b variants)\n- Fort Ludios: knox\n- Vlad's Tower: tower1, tower2, tower3\n- Elemental Planes: astral, water, fire, air, earth\n\n**Components:**\n1. des.* API implementation (terrain, rooms, entities, selection)\n2. Level file porting (Lua → JavaScript)\n3. Branch-aware level loading integration\n4. Testing against C traces\n\n**Total levels:** ~80 (40 unique named levels + quest variants)","status":"open","priority":1,"issue_type":"epic","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:51.245240465-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:51.245240465-05:00"}
{"id":"interface-3nk","title":"Implement rings and amulets (wear/remove mechanics)","description":"Implement wearable jewelry with all ring and amulet effects.\n\nComponents:\n- Put on/remove commands (P/R keys)\n- Ring slot management (left/right hand, limited slots)\n- All ring types and their effects\n- Amulet effects and restrictions (one amulet only)\n- BUC affects some ring effects\n- Cursed jewelry cannot be removed\n- Ring hunger (some rings increase food consumption)\n\nKey rings:\n- Protection (AC bonus, BUC affects amount)\n- Increase damage, Strength, Dexterity\n- Regeneration, Slow digestion\n- Levitation, Invisibility, See invisible\n- Conflict, Teleport control\n\nKey amulets:\n- Life saving (save from death once, crumbles)\n- Reflection (reflects rays)\n- ESP (telepathy)\n\nC reference:\n- do_wear.c: Ring_on(), Amulet_on()\n- worn.c: ring effects\n\nTest cases:\n- Blessed ring of protection gives +2 AC\n- Cursed ring cannot be removed\n- Life saving amulet resurrects from death\n- Ring of regeneration increases hunger","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:35.3970968-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:35.3970968-05:00","dependencies":[{"issue_id":"interface-3nk","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:31.291972706-05:00","created_by":"David Bau"}]}
{"id":"interface-3xt","title":"Special Levels: Collect C traces for Vlad's Tower, Fort Ludios, Valley","description":"Capture typGrid traces for small branch special levels: tower1/2/3 (Vlad's Tower), knox (Fort Ludios), valley (Gehennom entry). These are relatively simple fixed-map levels.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.195709172-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.764906039-05:00","closed_at":"2026-02-09T08:38:41.764906039-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-3xt","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.473525227-05:00","created_by":"David Bau"}]}
{"id":"interface-4ax","title":"Complete item system support with BUC, combat, magic, and interaction behaviors","description":"Implement full NetHack item behavior system including:\n- Blessed/Cursed/Uncursed (BUC) status and identification\n- All item interactions (apply, eat, quaff, read, zap, wear, wield)\n- Combat effects (weapons, armor, to-hit, damage, AC)\n- Magic item effects (wands, scrolls, potions, rings, amulets)\n- Item consumption and destruction\n- Special item behaviors and restrictions\n\nThis is essential for gameplay parity with C NetHack 3.7.\n\nSuccess criteria:\n- All 14 object classes fully functional\n- BUC status affects all item behaviors correctly\n- Combat system uses item properties\n- Magic effects match C NetHack exactly\n- Comprehensive test coverage for item interactions","status":"open","priority":2,"issue_type":"epic","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:24:21.740097674-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:24:21.740097674-05:00"}
{"id":"interface-53v","title":"Port Wizard levels (wizard1-3) to JavaScript","description":"Port the three Wizard of Yendor tower levels. Connected vertically, contain the Wizard boss and the Book of the Dead. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.178705564-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:53.178705564-05:00","labels":["port-level","tier2"],"dependencies":[{"issue_id":"interface-53v","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.698940063-05:00","created_by":"David Bau"}]}
{"id":"interface-5cn","title":"Port Quest levels (13 roles × start/locate/goal) to JavaScript","description":"Port all Quest branch levels for all 13 roles. Each role has unique start, locate, and goal levels with role-specific maps, monsters, and artifacts. Largest porting task (39 unique levels). Test against C traces.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.456158203-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.619358304-05:00","labels":["port-level","quest","tier5"],"dependencies":[{"issue_id":"interface-5cn","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:14.273958053-05:00","created_by":"David Bau"}]}
{"id":"interface-5yl","title":"Implement des.* API entities (des.monster, des.object, des.trap, des.altar, des.fountain)","description":"Extend js/sp_lev.js with entity placement functions: des.monster() for monster placement, des.object() for item placement, des.trap() for traps, des.altar() for altars, des.fountain() for fountains, des.gold() for gold, des.engraving() for engravings, des.grave() for graves. Needed for fully-featured special levels.","notes":"✓ des.object() - Full implementation with objectNameToType(), objectClassToType(), mksobj() integration\n✓ des.trap() - Full implementation with trapNameToType(), duplicate prevention\n⚬ des.monster() - Stub only\n⚬ des.altar() - Stub only\n⚬ des.fountain() - Stub only\n⚬ des.gold() - Not yet implemented\n⚬ des.engraving() - Not yet implemented\n⚬ des.grave() - Not yet implemented\n\nTest coverage: 5 tests in object_trap_placement.test.js (all passing)","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:33.222117666-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.621122783-05:00","labels":["des-api","infrastructure"],"dependencies":[{"issue_id":"interface-5yl","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.613598458-05:00","created_by":"David Bau"},{"issue_id":"interface-5yl","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:14.567274442-05:00","created_by":"David Bau"}]}
{"id":"interface-5zo","title":"Generate C item interaction session tests","description":"Extend the C test harness to generate item interaction sessions for RNG validation.\n\nComponents:\n- Extend test/comparison/c-harness to record item usage\n- Generate sessions for each item type (eat, quaff, read, zap, apply)\n- Record RNG sequences for item effects\n- Capture item state changes (BUC, enchantment, charges)\n- Record combat outcomes with items\n\nSession types needed:\n- eat_food.session.json - Eating various foods\n- quaff_potions.session.json - Drinking potions\n- read_scrolls.session.json - Reading scrolls\n- zap_wands.session.json - Zapping wands\n- apply_tools.session.json - Using tools\n- combat_weapons.session.json - Combat with various weapons\n- wear_armor.session.json - Wearing/removing armor\n- wear_jewelry.session.json - Rings/amulets\n\nC harness modifications:\n- Add item command recording to gen_gameplay_sessions.py\n- Record item properties (BUC, enchantment, charges) in session\n- Capture effect results (damage, healing, stat changes)\n\nPriority: P1 (needed for validation)","status":"open","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:26:20.154971075-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:26:20.154971075-05:00","dependencies":[{"issue_id":"interface-5zo","depends_on_id":"interface-4ax","type":"blocks","created_at":"2026-02-09T14:26:30.590434372-05:00","created_by":"David Bau"}]}
{"id":"interface-650","title":"Special Levels: Collect C traces for Sokoban (4 levels × 2 variants)","description":"Use the trace collection infrastructure to capture typGrid for all 8 Sokoban level variants (soko1a, soko1b, soko2a, soko2b, soko3a, soko3b, soko4a, soko4b). Multiple seeds needed to cover both variants per level. Store in test/comparison/maps/ with branch metadata. Sokoban is the simplest special level — pure fixed ASCII maps with no procedural elements.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:06.293458437-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.606838757-05:00","closed_at":"2026-02-09T08:38:41.606838757-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-650","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.325669534-05:00","created_by":"David Bau"}]}
{"id":"interface-6lq","title":"Port Castle level to JavaScript","description":"Port Castle level to JavaScript. Mix of fixed map and procedural elements, drawbridge, tune mechanism. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.043432829-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:53.043432829-05:00","labels":["complex","port-level","tier3"],"dependencies":[{"issue_id":"interface-6lq","depends_on_id":"interface-qah","type":"blocks","created_at":"2026-02-09T08:14:35.16871178-05:00","created_by":"David Bau"},{"issue_id":"interface-6lq","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T08:14:35.241038116-05:00","created_by":"David Bau"},{"issue_id":"interface-6lq","depends_on_id":"interface-pnh","type":"blocks","created_at":"2026-02-09T08:14:35.315345783-05:00","created_by":"David Bau"},{"issue_id":"interface-6lq","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.79742362-05:00","created_by":"David Bau"}]}
{"id":"interface-858","title":"Port Elemental Planes (astral, water, fire, air, earth) to JavaScript","description":"Port the 5 Elemental Planes and Astral Plane levels to JavaScript. Endgame levels with unique environments and challenges. Test against C traces.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.386776406-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.622889566-05:00","labels":["endgame","port-level","tier6"],"dependencies":[{"issue_id":"interface-858","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:14.370703068-05:00","created_by":"David Bau"}]}
{"id":"interface-8a7","title":"Implement des.* API foundation (des.map, des.terrain, des.level_init, des.level_flags)","description":"Create js/sp_lev.js with the core des.* API functions needed for the simplest special levels. Start with: des.level_init() for mazewalk/solidfill initialization, des.level_flags() for level properties, des.map() for placing fixed ASCII map regions, des.terrain() for setting individual terrain cells. These are needed for Sokoban and most Tier 1 levels. C ref: src/sp_lev.c","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:33.089725569-05:00","created_by":"David Bau","updated_at":"2026-02-09T11:35:21.796732153-05:00","closed_at":"2026-02-09T11:35:21.796737483-05:00","labels":["des-api"]}
{"id":"interface-8ss","title":"Special Levels: Collect C traces for Gehennom levels (sanctum, wizard1-3, demon lairs)","description":"Capture typGrid traces for Gehennom special levels: sanctum, wizard1/2/3, juiblex, baalzebub, asmodeus, orcus, fakewiz1/2. These are deep dungeon levels with complex maps.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.344982148-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.92739741-05:00","closed_at":"2026-02-09T08:38:41.92739741-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-8ss","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.628451303-05:00","created_by":"David Bau"}]}
{"id":"interface-96v","title":"Trace 33171: Combat mechanics - grid bug and dog fights","description":"Agent engages in early combat (turns 1-20) with grid bug (x) and dog (d). 10 combat encounters total. Compare C vs JS combat damage, to-hit rolls, and monster behavior.","notes":"**RNG DESYNC DISCOVERED**\n\nJS dungeon generation uses 2448 RNG calls vs C's 2589 calls (141 difference).\nThis causes different dungeon layouts with the same seed:\n- C NetHack: upstair at (60,6) in room bounds [51-61, 5-13]\n- JS NetHack: upstair at (61,6) in same room bounds\n\nRoot cause: Missing or extra RNG calls during makelevel().\nImpact: Cannot do direct turn-by-turn trace comparison with same seed.\n\n**NEW APPROACH**:\nInstead of fixing RNG sync (large task), focus on gameplay mechanics:\n1. Combat damage formulas\n2. Hit/miss calculation\n3. Monster AI behavior\n4. Item effects\n\nThese should be consistent regardless of dungeon layout.\n\nNext: Analyze combat encounters in both versions with DIFFERENT seeds to identify formula bugs.","status":"in_progress","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:29:15.507212119-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:36:41.380332809-05:00"}
{"id":"interface-9a0","title":"Implement branch-aware level generation (dnum/dlevel coordinate system)","description":"Modify makelevel() to accept (dnum, dlevel) instead of just depth. Create lookup table mapping (dnum, dlevel) to special level names. When a special level is identified, call its level generator instead of the procedural room/corridor algorithm. Update level caching to key by (dnum, dlevel). Update changeLevel() in nethack.js.","status":"in_progress","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:14:02.777704787-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.624236023-05:00","labels":["infrastructure","integration"],"dependencies":[{"issue_id":"interface-9a0","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.690952665-05:00","created_by":"David Bau"},{"issue_id":"interface-9a0","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:14.471235477-05:00","created_by":"David Bau"}]}
{"id":"interface-cdp","title":"Special Levels: Build C binary and set up trace collection infrastructure","description":"Build the C NetHack binary via setup.sh. Extend or create gen_special_sessions.py to capture typGrid traces for special levels across all branches. The current gen_map_sessions.py only handles main dungeon depths 1-N via Ctrl+V teleport. Special levels require branch-aware navigation (wizard goto, branch teleport). Output: session JSON files with branch/level metadata.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:12:59.737234044-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:34.050139466-05:00","closed_at":"2026-02-09T08:38:34.050139466-05:00","close_reason":"Closed","labels":["infrastructure"]}
{"id":"interface-d0r","title":"Port Gnomish Mines levels (minetown variants, mines end) to JavaScript","description":"Port Mines special levels: minetown (town, orcish-town, bazaar variants), mines end (4 variants). These have fixed maps with shops, temples, and specific NPCs. Test against C traces. Variant selection is seed-dependent.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.905735346-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:52.905735346-05:00","labels":["port-level","tier2"],"dependencies":[{"issue_id":"interface-d0r","depends_on_id":"interface-uc4","type":"blocks","created_at":"2026-02-09T08:14:34.881035365-05:00","created_by":"David Bau"},{"issue_id":"interface-d0r","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T08:14:34.947597386-05:00","created_by":"David Bau"},{"issue_id":"interface-d0r","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.592979295-05:00","created_by":"David Bau"}]}
{"id":"interface-ecx","title":"Port Fort Ludios (knox) to JavaScript","description":"Port the Fort Ludios (knox) level to JavaScript. Single fixed map with soldiers, barracks, treasure. Test against C traces.","status":"open","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.76352615-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.625385662-05:00","labels":["port-level","ready","tier1"],"dependencies":[{"issue_id":"interface-ecx","depends_on_id":"interface-3xt","type":"blocks","created_at":"2026-02-09T08:14:34.582351476-05:00","created_by":"David Bau"},{"issue_id":"interface-ecx","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T08:14:34.665805202-05:00","created_by":"David Bau"},{"issue_id":"interface-ecx","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.268464416-05:00","created_by":"David Bau"}]}
{"id":"interface-eyq","title":"Implement combat item mechanics (weapons, armor, to-hit, damage)","description":"Complete the combat system to use weapon and armor properties correctly.\n\nComponents:\n- Weapon damage calculation (small vs large monsters)\n- To-hit bonuses (weapon enchantment, strength, dexterity)\n- Armor class calculation (worn armor, rings, enchantments)\n- Weapon skill system (basic, skilled, expert)\n- Weapon material types (iron, silver, wood) vs monster types\n- Two-weapon combat, ranged weapons (bows, slings)\n- Blessed weapons vs undead/demons bonus\n\nC reference:\n- weapon.c: hitval(), dmgval()\n- uhitm.c: player attack calculations\n- do_wear.c: AC calculations from armor\n\nTest cases:\n- +1 weapon gives +1 to-hit and +1 damage\n- Blessed weapon extra damage vs undead\n- Silver weapon extra damage vs silver-haters\n- Armor enchantment affects AC correctly\n- High dexterity improves to-hit\n- Weapon skill affects damage\n\nPriority: P1 (critical for gameplay)","status":"open","priority":1,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:24.300189819-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:24.300189819-05:00","dependencies":[{"issue_id":"interface-eyq","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:30.778720408-05:00","created_by":"David Bau"}]}
{"id":"interface-gja","title":"Create item interaction test framework","description":"Build comprehensive test infrastructure for item interactions.\n\nComponents:\n- Unit tests for each item type\n- Integration tests for item combinations\n- BUC status test matrix\n- Combat simulation tests\n- Session replay tests for item usage\n\nTest structure:\n- test/unit/items/ - Per-item-type tests\n  - food.test.js - Eating tests\n  - potions.test.js - Potion effect tests\n  - scrolls.test.js - Scroll effect tests\n  - wands.test.js - Wand/ray tests\n  - rings.test.js - Ring effect tests\n  - weapons.test.js - Combat tests\n  - armor.test.js - AC calculation tests\n\n- test/integration/items/ - Cross-item tests\n  - buc_effects.test.js - BUC affects all items\n  - identification.test.js - ID methods\n  - combat_items.test.js - Weapons vs armor\n\n- test/comparison/items/ - C parity tests\n  - Item session replays from C harness\n  - RNG alignment for item effects\n\nPriority: P1 (needed before implementing features)","status":"open","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:26:06.206711072-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:26:06.206711072-05:00","dependencies":[{"issue_id":"interface-gja","depends_on_id":"interface-4ax","type":"blocks","created_at":"2026-02-09T14:26:30.499357637-05:00","created_by":"David Bau"}]}
{"id":"interface-gjg","title":"Port Rogue level and Bigroom to JavaScript","description":"Port the Rogue level (emulates classic Rogue aesthetics) and Bigroom variants (large open room). These appear at computed depths in the main dungeon. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.529285834-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:53.529285834-05:00","labels":["complex","port-level","tier3"],"dependencies":[{"issue_id":"interface-gjg","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.981696497-05:00","created_by":"David Bau"}]}
{"id":"interface-kr2","title":"Special Levels: Collect C traces for Elemental Planes (astral, water, fire, air, earth)","description":"Capture typGrid traces for the Elemental Planes branch: astral plane, water/fire/air/earth planes. These are endgame levels with unique layouts.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.485049668-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:18.485049668-05:00","labels":["traces"],"dependencies":[{"issue_id":"interface-kr2","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.777609107-05:00","created_by":"David Bau"}],"comments":[{"id":1,"issue_id":"interface-kr2","author":"David Bau","text":"Elemental Planes: Ctrl+V blocked by In_endgame() check. Also #dumpmap may not work on endgame levels. Need alternative approach.","created_at":"2026-02-09T13:38:19Z"}]}
{"id":"interface-llb","title":"Fix Sokoban spoiler map DECgraphics accuracy","description":"The spoiler guide Sokoban maps have 67 DECgraphics inaccuracies compared to actual C NetHack output:\n\n- 51 junction wall errors: spoiler uses plain │ or ─ where C generates T-junctions (├, ┤, ┬, ┴)\n- 4 corner-vs-junction errors: spoiler has T-junction where C generates corner (┌, ┐)\n- 12 staircase discrepancies: extra/shifted stair positions\n\nRoot cause: The spoiler author drew walls visually without applying NetHack's wall_extends() algorithm, which checks directional wall compatibility (horizontal walls only extend horizontally, vertical walls only extend vertically).\n\nA wall computation script was started at test/comparison/maps/compute_sokoban_walls.py but has convergence issues on some maps (soko4-2, soko3-2, soko2-1). The algorithm needs debugging before mass-updating the spoiler guide.\n\nSee detailed analysis in earlier session logs for exact mismatch locations across all 8 level variants.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T11:01:19.589443121-05:00","created_by":"David Bau","updated_at":"2026-02-09T11:01:19.589443121-05:00"}
{"id":"interface-lu1","title":"Implement item identification system","description":"Implement the item identification and discovery system.\n\nComponents:\n- Type identification (what is this potion/scroll/wand?)\n- BUC identification (is it blessed/cursed/uncursed?)\n- Enchantment identification (weapon/armor +/- value)\n- Name discovery (random appearances vs true names)\n- Identification methods (scrolls, shops, use-ID, #name command)\n- Call command (name items)\n\nIdentification methods:\n- Scroll of identify (main method)\n- Using item reveals its type (use-identification)\n- Shopkeeper pricing reveals BUC status\n- Stethoscope shows monster inventory\n- #name command for player naming\n\nC reference:\n- invent.c: identification flags\n- objnam.c: doname(), naming system\n- do_name.c: #name command\n\nTest cases:\n- Unidentified potion shows random appearance\n- After drinking, potion type is identified\n- Scroll of identify reveals type + BUC + enchantment\n- Named items display custom names\n- Discovered items show in #conduct list","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:56.326157175-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:56.326157175-05:00","dependencies":[{"issue_id":"interface-lu1","depends_on_id":"interface-14z","type":"blocks","created_at":"2026-02-09T14:26:36.631958325-05:00","created_by":"David Bau"},{"issue_id":"interface-lu1","depends_on_id":"interface-uqf","type":"blocks","created_at":"2026-02-09T14:26:36.722915485-05:00","created_by":"David Bau"},{"issue_id":"interface-lu1","depends_on_id":"interface-q6u","type":"blocks","created_at":"2026-02-09T14:26:36.816580869-05:00","created_by":"David Bau"}]}
{"id":"interface-mr1","title":"Port Sanctum level to JavaScript","description":"Port the Sanctum level (Moloch's Sanctum) to JavaScript. Endgame temple with high priest and Amulet of Yendor placement. Test against C traces.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.318767894-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.626606966-05:00","labels":["gehennom","port-level","tier4"],"dependencies":[{"issue_id":"interface-mr1","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:14.169930459-05:00","created_by":"David Bau"}]}
{"id":"interface-n7u","title":"Implement wand effects (zap command)","description":"Implement wand zapping with ray/beam mechanics and all wand effects.\n\nComponents:\n- Zap command (z key) with wand selection and direction\n- Ray/beam mechanics (line-of-sight, reflections, bouncing)\n- All wand types and their effects\n- Wand charges (limited uses, recharging)\n- BUC affects recharging success\n- Wand breaking and explosion\n\nKey wands:\n- Death, Lightning, Fire, Cold (damage rays)\n- Striking (physical damage ray)\n- Sleep, Slow monster, Polymorph\n- Wishing (special, limited charges)\n- Teleportation, Cancellation, Make invisible\n\nC reference:\n- zap.c: dozap(), bhit() for ray mechanics\n- wand.c: wand-specific code\n\nTest cases:\n- Death ray kills monsters in line\n- Rays reflect off walls correctly\n- Wand of wishing has 1-3 charges\n- Recharged wand might explode (cursed risky)\n- Engraving with wands consumes charge","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:13.696658671-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:13.696658671-05:00","dependencies":[{"issue_id":"interface-n7u","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:31.191858901-05:00","created_by":"David Bau"}]}
{"id":"interface-pnh","title":"Implement Selection API for geometric map operations","description":"Create selection API for coordinate set operations used by complex special levels: selection.new(), selection.area(), selection.rect(), selection.line(), selection.rndcoord(), selection.grow(), selection.negate(), selection.percentage(), selection.floodfill(), selection.match(), selection.filter_mapchar(). Supports union/intersection/complement. C ref: sp_lev.c selection functions. Needed for Castle, Gehennom, and complex levels.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:33.289096727-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:33.289096727-05:00","labels":["des-api","infrastructure"],"dependencies":[{"issue_id":"interface-pnh","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:14.753247597-05:00","created_by":"David Bau"}]}
{"id":"interface-q6u","title":"Implement scroll effects (read command)","description":"Implement scroll reading with all scroll effects.\n\nComponents:\n- Read command (r key) with scroll selection\n- All scroll types and their effects\n- BUC modifies scroll effects (blessed stronger, cursed backfires)\n- Illiteracy prevention (cursed items, low intelligence)\n- Scroll blanking (water, cancellation)\n- Ink cost for magic marker\n\nKey scrolls:\n- Identify (BUC affects # of items identified)\n- Enchant weapon/armor (BUC affects success/failure)\n- Remove curse, Teleportation, Magic mapping\n- Create monster, Taming, Genocide\n- Punishment (cursed scrolls create problems)\n\nC reference:\n- read.c: read_scroll(), seffects()\n- objnam.c: scroll naming\n\nTest cases:\n- Blessed identify IDs multiple items\n- Cursed enchant weapon might worsen item\n- Reading while confused randomizes effect\n- Blank scrolls do nothing\n- Illiterate characters can't read","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:03.30482534-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:03.30482534-05:00","dependencies":[{"issue_id":"interface-q6u","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:31.091194438-05:00","created_by":"David Bau"}]}
{"id":"interface-qah","title":"Special Levels: Collect C traces for main dungeon specials (oracle, medusa, castle, bigroom, rogue)","description":"Capture typGrid traces for special levels within the Dungeons of Doom: oracle level, medusa level, castle, bigroom, rogue level. These are at computed depths in the main dungeon. Use wizard teleport to reach them.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.269664188-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.850604672-05:00","closed_at":"2026-02-09T08:38:41.850604672-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-qah","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.551586738-05:00","created_by":"David Bau"}]}
{"id":"interface-sey","title":"Port Vlad's Tower levels (tower1-3) to JavaScript","description":"Port Vlad's Tower level definitions to JavaScript. Small fixed maps (3 levels). Tower has unique properties (no teleport, connected vertically). Test against C traces.","status":"open","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.69415831-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.627622714-05:00","labels":["port-level","ready","tier1"],"dependencies":[{"issue_id":"interface-sey","depends_on_id":"interface-3xt","type":"blocks","created_at":"2026-02-09T08:14:34.408694429-05:00","created_by":"David Bau"},{"issue_id":"interface-sey","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:34.482154553-05:00","created_by":"David Bau"},{"issue_id":"interface-sey","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.172684635-05:00","created_by":"David Bau"}]}
{"id":"interface-t9m","title":"Port Gehennom demon lair levels (juiblex, baalzebub, asmodeus, orcus) to JavaScript","description":"Port the four demon lair special levels in Gehennom. Each has a unique layout with a demon lord boss. Test against C traces.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.24705288-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.628903799-05:00","labels":["gehennom","port-level","tier4"],"dependencies":[{"issue_id":"interface-t9m","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:14.074652677-05:00","created_by":"David Bau"}]}
{"id":"interface-u4r","title":"Port Valley of the Dead to JavaScript","description":"Port the Valley of the Dead level to JavaScript. Entry point to Gehennom with fixed layout. Test against C traces.","status":"open","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.9764279-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:32:06.630199051-05:00","labels":["port-level","ready","tier1"],"dependencies":[{"issue_id":"interface-u4r","depends_on_id":"interface-3xt","type":"blocks","created_at":"2026-02-09T08:14:35.018746164-05:00","created_by":"David Bau"},{"issue_id":"interface-u4r","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.097629215-05:00","created_by":"David Bau"},{"issue_id":"interface-u4r","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.39369593-05:00","created_by":"David Bau"}]}
{"id":"interface-uc4","title":"Special Levels: Collect C traces for Gnomish Mines (minetown variants, mines end)","description":"Capture typGrid traces for Gnomish Mines special levels: minetown (multiple variants: town, orcish, bazaar), mines end (multiple variants). Use wizard mode to navigate to Mines branch. Multiple seeds for variant coverage.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.12719295-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.686433542-05:00","closed_at":"2026-02-09T08:38:41.686433542-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-uc4","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.401202603-05:00","created_by":"David Bau"}]}
{"id":"interface-uqf","title":"Implement potion effects (quaff command)","description":"Implement potion drinking with all potion effects.\n\nComponents:\n- Quaff command (q key) with potion selection\n- All potion types and their effects\n- BUC modifies potion potency/duration\n- Potion identification system\n- Dilution (dipping in fountains/water)\n- Throwing potions (vapor effects)\n\nKey potions:\n- Healing/Extra Healing (HP restoration, BUC affects amount)\n- Gain Ability (stat increase)\n- Confusion, Blindness, Paralysis (timed effects)\n- Speed, Levitation, Invisibility (intrinsics)\n- Water (dilution, blanking scrolls)\n\nC reference:\n- potion.c: dopotion(), peffects()\n- objnam.c: potion naming\n\nTest cases:\n- Blessed healing restores more HP\n- Cursed gain ability might decrease stats\n- Potion effects stack correctly with intrinsics\n- Diluted potions have reduced effects","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:24:53.716052403-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:24:53.716052403-05:00","dependencies":[{"issue_id":"interface-uqf","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:30.988588995-05:00","created_by":"David Bau"}]}
{"id":"interface-vc2","title":"Special Levels: Collect C traces for Quest levels (13 roles × 3 levels)","description":"Capture typGrid traces for Quest branch special levels: start, locate, goal for all 13 roles. This requires starting the game with different role selections. Largest trace collection task (39 unique levels).","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.411177427-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:18.411177427-05:00","labels":["traces"],"dependencies":[{"issue_id":"interface-vc2","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.70252155-05:00","created_by":"David Bau"}]}
{"id":"interface-wc8","title":"Implement BUC (Blessed/Uncursed/Cursed) status system","description":"Implement the core BUC status system that affects all item behaviors.\n\nKey components:\n- BUC status flags on all objects (obj.blessed, obj.cursed)\n- BUC identification state (known vs unknown)\n- Visual indicators for BUC status when identified\n- BUC status affects: food nutrition, potion effects, scroll effects, armor AC, weapon damage/to-hit\n\nC reference:\n- objclass.h: BUC flags\n- do_wear.c, eat.c, potion.c: BUC effect modifiers\n\nTest cases:\n- Blessed food gives more nutrition\n- Cursed armor gives worse AC\n- Cursed items cannot be unwielded/removed\n- BUC status display in inventory\n\nDependencies: None (foundational)","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:24:33.651890335-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:24:33.651890335-05:00","dependencies":[{"issue_id":"interface-wc8","depends_on_id":"interface-4ax","type":"blocks","created_at":"2026-02-09T14:26:30.684493483-05:00","created_by":"David Bau"}]}
{"id":"interface-wzo","title":"Add special level comparison tests to session_runner.test.js","description":"Extend the test framework to handle special level session files. Compare JS-generated special level typGrids against C traces. Support branch-aware session format. Report terrain mismatches with readable names. Coverage: all special levels with collected traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:14:02.84554526-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:14:02.84554526-05:00","labels":["infrastructure"],"dependencies":[{"issue_id":"interface-wzo","depends_on_id":"interface-650","type":"blocks","created_at":"2026-02-09T08:14:35.762804155-05:00","created_by":"David Bau"}]}

{"id":"interface-060","title":"Port Medusa level to JavaScript","description":"Port Medusa level to JavaScript. Island map with Medusa boss, statues, and water. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.11224964-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.062078679-05:00","labels":["complex","port-level","tier3"],"dependencies":[{"issue_id":"interface-060","depends_on_id":"interface-qah","type":"blocks","created_at":"2026-02-09T08:14:35.388127229-05:00","created_by":"David Bau"},{"issue_id":"interface-060","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.462245613-05:00","created_by":"David Bau"}]}
{"id":"interface-0yz","title":"Implement des.* API rooms and features (des.room, des.door, des.stair, des.ladder)","description":"Extend js/sp_lev.js with room and structural feature functions: des.room() for creating rooms with contents callbacks, des.door() for placing doors, des.stair() for placing stairs/branch connections, des.ladder() for ladders. Needed for Oracle, Mines, and most levels beyond pure maps.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:33.155550195-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.792458794-05:00","labels":["des-api","infrastructure"],"dependencies":[{"issue_id":"interface-0yz","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.540816241-05:00","created_by":"David Bau"}]}
{"id":"interface-14z","title":"Implement food consumption system (eating)","description":"Complete implementation of the eating/food consumption system.\n\nComponents:\n- Eat command (e key) with item selection\n- Food nutrition values and hunger system\n- BUC status affects nutrition (blessed +1/3, cursed -1/3)\n- Special food effects (corpses, tins, special foods)\n- Eating duration (multi-turn occupation)\n- Choking on food (eating when satiated)\n- Vomiting and food poisoning\n\nC reference:\n- eat.c: all eating logic\n- you.h: hunger states (SATIATED, NOT_HUNGRY, HUNGRY, WEAK, FAINTING)\n\nTest cases:\n- Basic eating completes and restores nutrition\n- Blessed food gives extra nutrition\n- Cursed food gives less nutrition\n- Corpse effects (intrinsics, poisoning, sickness)\n- Cannot eat when satiated (or choke)","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:24:43.447248581-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:24:43.447248581-05:00","dependencies":[{"issue_id":"interface-14z","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:30.877423094-05:00","created_by":"David Bau"}]}
{"id":"interface-1u3","title":"Port Oracle level to JavaScript","description":"Port the Oracle level to JavaScript. Fixed room layout with Oracle NPC, fountains, and supply chest. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.832741435-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:34.606315985-05:00","labels":["port-level","tier2"],"dependencies":[{"issue_id":"interface-1u3","depends_on_id":"interface-qah","type":"blocks","created_at":"2026-02-09T08:14:34.734489317-05:00","created_by":"David Bau"},{"issue_id":"interface-1u3","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T08:14:34.805151325-05:00","created_by":"David Bau"},{"issue_id":"interface-1u3","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.487324187-05:00","created_by":"David Bau"}]}
{"id":"interface-1xn","title":"Port Sokoban levels (soko1-4, a/b variants) to JavaScript","description":"Port the 8 Sokoban level Lua files to JavaScript. These are pure ASCII map levels with fixed layouts ‚Äî the simplest special levels. Each has a map, boulders, traps (holes/pits), stairs, and a prize container. Test against C traces. First special level to get working end-to-end.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.629304888-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:06:46.816371777-05:00","closed_at":"2026-02-09T14:06:46.816371777-05:00","close_reason":"All 8 Sokoban levels successfully ported to JavaScript (soko1-1/2, soko2-1/2, soko3-1/2, soko4-1/2). Direct 1:1 Lua‚ÜíJS translation with stub implementations for monsters/doors/engravings. Verified soko2-1 generates correctly. Commits: d2dff72 (level ports), 1a2c68b (documentation).","labels":["port-level"],"dependencies":[{"issue_id":"interface-1xn","depends_on_id":"interface-650","type":"blocks","created_at":"2026-02-09T08:14:34.259891516-05:00","created_by":"David Bau"},{"issue_id":"interface-1xn","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:34.333106191-05:00","created_by":"David Bau"}]}
{"id":"interface-24i","title":"Quest completion: Navigate to Quest, complete role Quest","description":"Complete role-specific Quest to obtain Quest artifact (powerful item needed for late game). Quest available after Dlvl 14 and XL 14.\n\nRequirements:\n- Reach XL 14 (experience level)\n- Get Quest invite from leader\n- Navigate to Quest branch\n- Defeat Quest nemesis\n- Retrieve Quest artifact\n\nEach role has different Quest layout and enemies. Quest artifacts provide critical abilities for ascension run.","notes":"Test: Agent completes Valkyrie Quest (or other role Quest)\n\nSpoiler guide: Quest mechanics, role-specific Quest details, artifact powers\n\nParent epic: interface-8m3","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:43:24.055050475-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:43:24.055050475-05:00","dependencies":[{"issue_id":"interface-24i","depends_on_id":"interface-6ng","type":"blocks","created_at":"2026-02-09T14:43:49.904780304-05:00","created_by":"David Bau"},{"issue_id":"interface-24i","depends_on_id":"interface-oqg","type":"blocks","created_at":"2026-02-09T14:43:50.004025582-05:00","created_by":"David Bau"},{"issue_id":"interface-24i","depends_on_id":"interface-4vv","type":"blocks","created_at":"2026-02-09T14:43:50.099731294-05:00","created_by":"David Bau"}]}
{"id":"interface-343","title":"Implement tool usage (apply command)","description":"Implement the apply command for using tools and special items.\n\nComponents:\n- Apply command (a key) with tool selection\n- All tool types and their uses\n- Tool charges/uses (limited durability)\n- Special tool interactions (digging, unlocking, etc.)\n\nKey tools:\n- Pickaxe, mattock (digging through walls)\n- Key, lock pick, credit card (unlocking doors/containers)\n- Tinning kit (tin corpses)\n- Magic marker (write scrolls)\n- Lamp, lantern (light sources, need oil)\n- Bag of holding, sack (containers)\n- Stethoscope (examine monsters)\n- Unicorn horn (cure poison/sickness)\n\nC reference:\n- apply.c: doapply(), tool-specific functions\n- dig.c: digging mechanics\n\nTest cases:\n- Pickaxe digs through walls (multi-turn)\n- Lock pick opens locked doors/boxes\n- Magic marker writes scrolls (consumes ink)\n- Lamp provides light, runs out of oil\n- Blessed unicorn horn cures more conditions","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:45.180043096-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:45.180043096-05:00","dependencies":[{"issue_id":"interface-343","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:31.384609798-05:00","created_by":"David Bau"}]}
{"id":"interface-3br","title":"Complete special level system for all dungeon branches","description":"Epic tracking implementation of all NetHack special levels across 8 dungeon branches.\n\n**Scope:**\n- Dungeons of Doom: rogue, oracle, bigroom, medusa, castle\n- Gehennom: valley, sanctum, wizard1-3, demon lairs (juiblex, baalzebub, asmodeus, orcus)\n- Gnomish Mines: minetown variants, mines end variants\n- Quest: 13 roles √ó 3 levels (start/locate/goal)\n- Sokoban: ‚úì COMPLETE (soko1-4, a/b variants)\n- Fort Ludios: knox\n- Vlad's Tower: tower1, tower2, tower3\n- Elemental Planes: astral, water, fire, air, earth\n\n**Components:**\n1. des.* API implementation (terrain, rooms, entities, selection)\n2. Level file porting (Lua ‚Üí JavaScript)\n3. Branch-aware level loading integration\n4. Testing against C traces\n\n**Total levels:** ~80 (40 unique named levels + quest variants)","status":"open","priority":1,"issue_type":"epic","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:51.245240465-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:51.245240465-05:00","dependencies":[{"issue_id":"interface-3br","depends_on_id":"interface-sey","type":"blocks","created_at":"2026-02-09T14:28:15.05443265-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-u4r","type":"blocks","created_at":"2026-02-09T14:28:15.349592984-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-53v","type":"blocks","created_at":"2026-02-09T14:28:15.783750849-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-060","type":"blocks","created_at":"2026-02-09T14:28:16.086699265-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-gjg","type":"blocks","created_at":"2026-02-09T14:28:16.233126607-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-t9m","type":"blocks","created_at":"2026-02-09T14:28:16.376178777-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-mr1","type":"blocks","created_at":"2026-02-09T14:28:16.523455607-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-5cn","type":"blocks","created_at":"2026-02-09T14:28:16.657579092-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-858","type":"blocks","created_at":"2026-02-09T14:28:16.798905977-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-9a0","type":"blocks","created_at":"2026-02-09T14:28:16.950869259-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-5yl","type":"blocks","created_at":"2026-02-09T14:28:17.093508608-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T14:28:17.233996654-05:00","created_by":"David Bau"},{"issue_id":"interface-3br","depends_on_id":"interface-pnh","type":"blocks","created_at":"2026-02-09T14:28:17.379971279-05:00","created_by":"David Bau"}]}
{"id":"interface-3nk","title":"Implement rings and amulets (wear/remove mechanics)","description":"Implement wearable jewelry with all ring and amulet effects.\n\nComponents:\n- Put on/remove commands (P/R keys)\n- Ring slot management (left/right hand, limited slots)\n- All ring types and their effects\n- Amulet effects and restrictions (one amulet only)\n- BUC affects some ring effects\n- Cursed jewelry cannot be removed\n- Ring hunger (some rings increase food consumption)\n\nKey rings:\n- Protection (AC bonus, BUC affects amount)\n- Increase damage, Strength, Dexterity\n- Regeneration, Slow digestion\n- Levitation, Invisibility, See invisible\n- Conflict, Teleport control\n\nKey amulets:\n- Life saving (save from death once, crumbles)\n- Reflection (reflects rays)\n- ESP (telepathy)\n\nC reference:\n- do_wear.c: Ring_on(), Amulet_on()\n- worn.c: ring effects\n\nTest cases:\n- Blessed ring of protection gives +2 AC\n- Cursed ring cannot be removed\n- Life saving amulet resurrects from death\n- Ring of regeneration increases hunger","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:35.3970968-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:35.3970968-05:00","dependencies":[{"issue_id":"interface-3nk","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:31.291972706-05:00","created_by":"David Bau"}]}
{"id":"interface-3nt","title":"Fix monster movement RNG desync (distfleeck, mcalcmove)","notes":"**Fix implemented in headless_runner.js (commit ea098e8)**\n\nAdded proper simulateTurnEnd() method to HeadlessGame class that matches\nC NetHack's turn processing sequence:\n1. settrack() after movemon\n2. mcalcmove() for all monsters (with rn2(12) for speed rounding)\n3. rn2(70) for monster spawn check\n4. HP regeneration with rn2(100)\n5. dosounds() with rn2(200)\n6. gethungry() with rn2(20)\n\nThis should fix the RNG desync that occurred on turn 67 (first wait on Dlvl 2).\n\nNext: Run full test suite to verify seed1.session.json now passes all 71+ steps.","status":"in_progress","priority":1,"issue_type":"bug","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:41:40.861504077-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:52:17.235900018-05:00"}
{"id":"interface-3xt","title":"Special Levels: Collect C traces for Vlad's Tower, Fort Ludios, Valley","description":"Capture typGrid traces for small branch special levels: tower1/2/3 (Vlad's Tower), knox (Fort Ludios), valley (Gehennom entry). These are relatively simple fixed-map levels.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.195709172-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.764906039-05:00","closed_at":"2026-02-09T08:38:41.764906039-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-3xt","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.473525227-05:00","created_by":"David Bau"}]}
{"id":"interface-4ax","title":"Complete item system support with BUC, combat, magic, and interaction behaviors","description":"Implement full NetHack item behavior system including:\n- Blessed/Cursed/Uncursed (BUC) status and identification\n- All item interactions (apply, eat, quaff, read, zap, wear, wield)\n- Combat effects (weapons, armor, to-hit, damage, AC)\n- Magic item effects (wands, scrolls, potions, rings, amulets)\n- Item consumption and destruction\n- Special item behaviors and restrictions\n\nThis is essential for gameplay parity with C NetHack 3.7.\n\nSuccess criteria:\n- All 14 object classes fully functional\n- BUC status affects all item behaviors correctly\n- Combat system uses item properties\n- Magic effects match C NetHack exactly\n- Comprehensive test coverage for item interactions","status":"open","priority":2,"issue_type":"epic","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:24:21.740097674-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:24:21.740097674-05:00"}
{"id":"interface-4vv","title":"Advanced combat: Ranged attacks, tactics, tough monsters","description":"Handle dangerous monsters that require more than simple melee. Use ranged weapons, wands, tactical positioning.\n\nCurrent status:\n- ‚úì Basic melee combat\n- ‚úó No ranged weapon usage\n- ‚úó No wand usage\n- ‚úó No tactical positioning\n- ‚úó No monster-specific strategies\n\nNeeded:\n- Throw daggers/darts at ranged enemies\n- Use wands (death, sleep, striking)\n- Kite dangerous melee monsters\n- Avoid floating eye paralysis (don't melee)\n- Handle nymphs (theft protection)\n- Genocide strategy for difficult monsters","notes":"Test: Agent defeats floating eyes, nymphs, difficult mid-game monsters without dying\n\nSpoiler guide: Monster tactics, dangerous monsters, combat strategies\n\nParent epic: interface-8m3","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:43:13.818235926-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:43:13.818235926-05:00","dependencies":[{"issue_id":"interface-4vv","depends_on_id":"interface-6ng","type":"blocks","created_at":"2026-02-09T14:43:49.508251889-05:00","created_by":"David Bau"}]}
{"id":"interface-53v","title":"Port Wizard levels (wizard1-3) to JavaScript","description":"Port the three Wizard of Yendor tower levels. Connected vertically, contain the Wizard boss and the Book of the Dead. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.178705564-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:34.843462251-05:00","labels":["port-level","tier2"]}
{"id":"interface-5cn","title":"Port Quest levels (13 roles √ó start/locate/goal) to JavaScript","description":"Port all Quest branch levels for all 13 roles. Each role has unique start, locate, and goal levels with role-specific maps, monsters, and artifacts. Largest porting task (39 unique levels). Test against C traces.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.456158203-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.482279545-05:00","labels":["port-level","quest","tier5"]}
{"id":"interface-5yl","title":"Implement des.* API entities (des.monster, des.object, des.trap, des.altar, des.fountain)","description":"Extend js/sp_lev.js with entity placement functions: des.monster() for monster placement, des.object() for item placement, des.trap() for traps, des.altar() for altars, des.fountain() for fountains, des.gold() for gold, des.engraving() for engravings, des.grave() for graves. Needed for fully-featured special levels.","notes":"‚úì des.object() - Full implementation with objectNameToType(), objectClassToType(), mksobj() integration\n‚úì des.trap() - Full implementation with trapNameToType(), duplicate prevention\n‚ö¨ des.monster() - Stub only\n‚ö¨ des.altar() - Stub only\n‚ö¨ des.fountain() - Stub only\n‚ö¨ des.gold() - Not yet implemented\n‚ö¨ des.engraving() - Not yet implemented\n‚ö¨ des.grave() - Not yet implemented\n\nTest coverage: 5 tests in object_trap_placement.test.js (all passing)","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:33.222117666-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.692347678-05:00","labels":["des-api","infrastructure"],"dependencies":[{"issue_id":"interface-5yl","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.613598458-05:00","created_by":"David Bau"}]}
{"id":"interface-5zo","title":"Generate C item interaction session tests","description":"Extend the C test harness to generate item interaction sessions for RNG validation.\n\nComponents:\n- Extend test/comparison/c-harness to record item usage\n- Generate sessions for each item type (eat, quaff, read, zap, apply)\n- Record RNG sequences for item effects\n- Capture item state changes (BUC, enchantment, charges)\n- Record combat outcomes with items\n\nSession types needed:\n- eat_food.session.json - Eating various foods\n- quaff_potions.session.json - Drinking potions\n- read_scrolls.session.json - Reading scrolls\n- zap_wands.session.json - Zapping wands\n- apply_tools.session.json - Using tools\n- combat_weapons.session.json - Combat with various weapons\n- wear_armor.session.json - Wearing/removing armor\n- wear_jewelry.session.json - Rings/amulets\n\nC harness modifications:\n- Add item command recording to gen_gameplay_sessions.py\n- Record item properties (BUC, enchantment, charges) in session\n- Capture effect results (damage, healing, stat changes)\n\nPriority: P1 (needed for validation)","status":"open","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:26:20.154971075-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:26:20.154971075-05:00","dependencies":[{"issue_id":"interface-5zo","depends_on_id":"interface-4ax","type":"blocks","created_at":"2026-02-09T14:26:30.590434372-05:00","created_by":"David Bau"}]}
{"id":"interface-61u","title":"Investigate depth 2 map structure differences (seeds 163, 306)","description":"**Problem**: typGrid doesn't match at depth 2 for seeds 163, 306\n\n**Evidence**:\n- Seed119 depth 2: No fountains, 243 ROOM cells, 1 SDOOR\n- Seed163 depth 2: 2 fountains, 219 ROOM cells, 4 SDOOR, 1 SCORR\n- Map structure is fundamentally different, not just RNG timing\n\n**Analysis**:\n- place_lregion is implemented and works correctly\n- Both seeds use full-level bounds for branch placement (no place_branch)\n- RNG sequences appear to be executing, but produce different map layouts\n- Suggests conditional code paths or algorithmic differences in:\n  - Room generation (size, count, placement)\n  - Corridor connections\n  - Feature placement (fountains, etc.)\n  - Door types (DOOR vs SDOOR)\n\n**Next Steps**:\n1. Compare room counts and sizes between JS and C for seed163 depth 2\n2. Trace through makemaz/makerooms to find divergence point\n3. Check if depth 2 uses special level generation vs procedural\n4. Investigate fountain placement logic at depth 2\n\n**Test Impact**: \n- seed163: typGrid fails at depths 2-5\n- seed306: typGrid fails at depths 2+ (same pattern)\n\n**Reference**: DEPTH2_IMPLEMENTATION_PLAN.md Phase 2","status":"open","priority":2,"issue_type":"bug","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:52:04.955448698-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:52:04.955448698-05:00"}
{"id":"interface-650","title":"Special Levels: Collect C traces for Sokoban (4 levels √ó 2 variants)","description":"Use the trace collection infrastructure to capture typGrid for all 8 Sokoban level variants (soko1a, soko1b, soko2a, soko2b, soko3a, soko3b, soko4a, soko4b). Multiple seeds needed to cover both variants per level. Store in test/comparison/maps/ with branch metadata. Sokoban is the simplest special level ‚Äî pure fixed ASCII maps with no procedural elements.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:06.293458437-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.606838757-05:00","closed_at":"2026-02-09T08:38:41.606838757-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-650","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.325669534-05:00","created_by":"David Bau"}]}
{"id":"interface-6i5","title":"Debug seed1 level 2 generation algorithmic divergence","description":"seed1 steps 67-71 fail after level 2 generation despite RNG trace matching exactly at step 66. Same RNG consumed but different level result: JS generates shop (mimic, shopkeeper), C generates regular rooms (jackals, grid bugs). This is algorithmic divergence, not RNG bug.","notes":"Affects 5 tests. Low priority - high effort, unclear benefit. Requires deep level generation algorithm analysis.","status":"open","priority":3,"issue_type":"bug","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:33:23.078583897-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:33:23.078583897-05:00"}
{"id":"interface-6lq","title":"Port Castle level to JavaScript","description":"Port Castle level to JavaScript. Mix of fixed map and procedural elements, drawbridge, tune mechanism. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.043432829-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:34.94832927-05:00","labels":["complex","port-level","tier3"],"dependencies":[{"issue_id":"interface-6lq","depends_on_id":"interface-qah","type":"blocks","created_at":"2026-02-09T08:14:35.16871178-05:00","created_by":"David Bau"},{"issue_id":"interface-6lq","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T08:14:35.241038116-05:00","created_by":"David Bau"},{"issue_id":"interface-6lq","depends_on_id":"interface-pnh","type":"blocks","created_at":"2026-02-09T08:14:35.315345783-05:00","created_by":"David Bau"},{"issue_id":"interface-6lq","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.79742362-05:00","created_by":"David Bau"}]}
{"id":"interface-6ng","title":"Early game survival: Combat, food, HP management (Dlvl 1-5)","description":"Agent must survive first 5 dungeon levels reliably. This requires basic combat tactics, food management to avoid starvation, and HP recovery strategies.\n\nCurrent status:\n- ‚úì Basic HP management with rest\n- ‚úì Prayer as emergency backup\n- ‚úì Healing potion usage\n- ‚úì Equipment management (weapons/armor)\n- ‚úì Pet detection and avoidance\n- ‚ö† Combat still primitive (just attack nearest)\n\nNeeded improvements:\n- Smart retreat when low HP with enemies nearby\n- Food consumption (eat corpses/food from inventory)\n- Avoid dangerous monsters (e.g., floating eyes, nymphs)\n- Use stairs to escape when overwhelmed\n- Better monster threat assessment","notes":"Test: Agent should survive to Dlvl 5 in 80%+ of runs with common roles (Val, Bar, Sam).\n\nSpoiler guide sections:\n- Section on food and nutrition\n- Monster difficulty ratings\n- Combat tactics\n\nParent epic: interface-8m3","status":"in_progress","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:42:57.103725705-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:57:43.309473349-05:00"}
{"id":"interface-6y3","title":"Get Amulet: Defeat Wizard, navigate to Sanctum, retrieve Amulet","description":"Final descent objective: defeat Wizard of Yendor (multiple times), navigate to deepest level, reach Moloch's Sanctum, take Amulet of Yendor.\n\nRequirements:\n- Defeat Wizard of Yendor (revives multiple times)\n- Have Bell of Opening, Candelabrum, Book of the Dead\n- Open Sanctum with invocation ritual\n- Take Amulet from altar\n\nGetting Amulet triggers ascension run - Wizard will harass constantly on way up.","notes":"Test: Agent successfully retrieves Amulet\n\nSpoiler guide: Wizard tactics, invocation ritual, Sanctum layout\n\nParent epic: interface-8m3","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:43:32.715739285-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:43:32.715739285-05:00","dependencies":[{"issue_id":"interface-6y3","depends_on_id":"interface-mgv","type":"blocks","created_at":"2026-02-09T14:43:50.392967778-05:00","created_by":"David Bau"}]}
{"id":"interface-858","title":"Port Elemental Planes (astral, water, fire, air, earth) to JavaScript","description":"Port the 5 Elemental Planes and Astral Plane levels to JavaScript. Endgame levels with unique environments and challenges. Test against C traces.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.386776406-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.588541833-05:00","labels":["endgame","port-level","tier6"]}
{"id":"interface-8a7","title":"Implement des.* API foundation (des.map, des.terrain, des.level_init, des.level_flags)","description":"Create js/sp_lev.js with the core des.* API functions needed for the simplest special levels. Start with: des.level_init() for mazewalk/solidfill initialization, des.level_flags() for level properties, des.map() for placing fixed ASCII map regions, des.terrain() for setting individual terrain cells. These are needed for Sokoban and most Tier 1 levels. C ref: src/sp_lev.c","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:33.089725569-05:00","created_by":"David Bau","updated_at":"2026-02-09T11:35:21.796732153-05:00","closed_at":"2026-02-09T11:35:21.796737483-05:00","labels":["des-api"]}
{"id":"interface-8m3","title":"[EPIC] Build selfplay agent capable of ascending (winning NetHack)","description":"Build an AI agent that can play NetHack from start to finish: descend through the dungeon, retrieve the Amulet of Yendor from Moloch's Sanctum, and ascend to achieve victory.\n\nNetHack victory requires navigating 50+ dungeon levels, defeating powerful monsters, managing complex inventory and resources, and making strategic decisions. The spoilers/guide.md (4786 lines) contains essential game knowledge.\n\nSuccess criteria: Agent achieves ascension on at least one run.","notes":"**Victory Path:**\n1. Survive early game (Dlvl 1-10)\n2. Complete Quest for role artifact\n3. Navigate Mines and Sokoban for resources\n4. Descend through Gehennom (Dlvl 20-50)\n5. Defeat Wizard of Yendor, get Amulet\n6. Escape back through dungeon\n7. Complete Elemental Planes\n8. Ascend on Astral Plane\n\n**Key Resources:**\n- spoilers/guide.md - comprehensive game knowledge\n- js/ implementation - mechanics to understand\n- test/comparison/ - verify behavior matches C NetHack\n\n**Approach:**\nBreak into incremental capabilities, test with traces, use spoilers for strategy.","status":"open","priority":2,"issue_type":"epic","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:42:45.450579764-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:42:45.450579764-05:00","dependencies":[{"issue_id":"interface-8m3","depends_on_id":"interface-swb","type":"blocks","created_at":"2026-02-09T14:43:50.603027687-05:00","created_by":"David Bau"}]}
{"id":"interface-8rj","title":"Fix map session depth 2+ RNG misalignment","description":"Map sessions (seed16, seed72, seed119, seed163, seed306) show RNG divergence at depth 2+ while depth 1 is perfect. C uses wizard_level_teleport between depths, JS regenerates independently. Need to analyze and match C's teleport RNG consumption.","notes":"üéâ MILESTONE: 100% RNG alignment achieved at depth 2! All 2476/2476 calls match perfectly. Implemented rnd_misc_item + pet arrival simulation. Commit: a083820. Test results: 1098/66 (+3). Next: investigate test framework issue (RNG matches but tests fail).","status":"in_progress","priority":1,"issue_type":"bug","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:33:13.7086497-05:00","created_by":"David Bau","updated_at":"2026-02-09T15:18:14.205107603-05:00"}
{"id":"interface-8rm","title":"Add DECgraphics mode support for selfplay agent","description":"Agent must parse and understand screen output in both ASCII and DECgraphics modes. DECgraphics uses Unicode box-drawing characters for walls/corridors instead of ASCII |, -, +, #.\n\nCurrent status:\n- ‚úì Agent works in ASCII mode (|, -, +, # for walls)\n- ‚úó tmux capture-pane loses DECgraphics characters\n- ‚úó Screen parser doesn't recognize DECgraphics symbols\n- ‚úó No DECgraphics symbol mapping\n\nDECgraphics symbols (from NetHack):\n- Walls: ‚îÄ ‚îÇ ‚îå ‚îê ‚îî ‚îò ‚îú ‚î§ ‚î¨ ‚î¥ ‚îº\n- Corridor: #\n- Floor: ¬∑\n- Open door: ‚äï or /\n- Closed door: +\n\nNeeded:\n1. Fix tmux capture to preserve Unicode (use -e flag or -p with correct encoding)\n2. Add DECgraphics symbol recognition to screen_parser.js\n3. Map DECgraphics chars to terrain types (HWALL, VWALL, etc.)\n4. Test agent works correctly in both modes\n5. Update c_runner to support both symbol sets","notes":"Test cases:\n- Run agent with NETHACKOPTIONS='symset:DECgraphics' \n- Verify wall detection, pathfinding work correctly\n- Compare behavior in ASCII vs DECgraphics modes\n\nFiles to modify:\n- selfplay/interface/tmux_adapter.js (capture with encoding)\n- selfplay/perception/screen_parser.js (symbol recognition)\n- selfplay/runner/c_runner.js (symset option)\n\nReference:\n- C NetHack: drawing.c, symbols.c\n- Current ASCII handling in screen_parser.js\n- MEMORY.md note about tmux charset loss","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:45:22.625193181-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:45:22.625193181-05:00"}
{"id":"interface-8ss","title":"Special Levels: Collect C traces for Gehennom levels (sanctum, wizard1-3, demon lairs)","description":"Capture typGrid traces for Gehennom special levels: sanctum, wizard1/2/3, juiblex, baalzebub, asmodeus, orcus, fakewiz1/2. These are deep dungeon levels with complex maps.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.344982148-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.92739741-05:00","closed_at":"2026-02-09T08:38:41.92739741-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-8ss","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.628451303-05:00","created_by":"David Bau"}]}
{"id":"interface-96v","title":"Trace 33171: Combat mechanics - grid bug and dog fights","description":"Agent engages in early combat (turns 1-20) with grid bug (x) and dog (d). 10 combat encounters total. Compare C vs JS combat damage, to-hit rolls, and monster behavior.","notes":"**RNG DESYNC DISCOVERED**\n\nJS dungeon generation uses 2448 RNG calls vs C's 2589 calls (141 difference).\nThis causes different dungeon layouts with the same seed:\n- C NetHack: upstair at (60,6) in room bounds [51-61, 5-13]\n- JS NetHack: upstair at (61,6) in same room bounds\n\nRoot cause: Missing or extra RNG calls during makelevel().\nImpact: Cannot do direct turn-by-turn trace comparison with same seed.\n\n**NEW APPROACH**:\nInstead of fixing RNG sync (large task), focus on gameplay mechanics:\n1. Combat damage formulas\n2. Hit/miss calculation\n3. Monster AI behavior\n4. Item effects\n\nThese should be consistent regardless of dungeon layout.\n\nNext: Analyze combat encounters in both versions with DIFFERENT seeds to identify formula bugs.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:29:15.507212119-05:00","created_by":"David Bau","updated_at":"2026-02-09T15:08:24.710198003-05:00","closed_at":"2026-02-09T14:40:46.559091323-05:00"}
{"id":"interface-9a0","title":"Implement branch-aware level generation (dnum/dlevel coordinate system)","description":"Modify makelevel() to accept (dnum, dlevel) instead of just depth. Create lookup table mapping (dnum, dlevel) to special level names. When a special level is identified, call its level generator instead of the procedural room/corridor algorithm. Update level caching to key by (dnum, dlevel). Update changeLevel() in nethack.js.","status":"in_progress","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:14:02.777704787-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.997266781-05:00","labels":["infrastructure","integration"],"dependencies":[{"issue_id":"interface-9a0","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.690952665-05:00","created_by":"David Bau"}]}
{"id":"interface-b9r","title":"Test agent with multiple symbol sets (ASCII, DECgraphics, IBMgraphics)","description":"Verify selfplay agent works correctly with all NetHack symbol sets, not just ASCII. NetHack supports multiple graphical symbol sets for better visual display.\n\nSymbol sets to support:\n- ASCII (default): |, -, +, # - WORKING NOW\n- DECgraphics: ‚îÄ‚îÇ‚îå‚îê‚îî‚îò‚îú‚î§‚î¨‚î¥‚îº¬∑ - PRIORITY\n- IBMgraphics: Similar to DEC, slightly different chars\n- UTF8graphics: Modern Unicode variant\n\nThis task depends on base DECgraphics support being implemented first.\n\nTest approach:\n1. Run agent with each symbol set\n2. Verify terrain detection (walls, doors, corridors, etc.)\n3. Compare navigation success rates across symbol sets\n4. Ensure no degradation vs ASCII mode\n\nAcceptance criteria:\n- Agent achieves same survival rate in DECgraphics as ASCII\n- No symbol misidentification errors\n- All map parsing tests pass for both modes","notes":"Configuration:\n- ASCII: NETHACKOPTIONS='symset:default' or no option\n- DECgraphics: NETHACKOPTIONS='symset:DECgraphics'  \n- IBMgraphics: NETHACKOPTIONS='symset:IBMgraphics'\n\nRelated: interface-??? (DECgraphics support task)","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:45:29.839414927-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:45:29.839414927-05:00","dependencies":[{"issue_id":"interface-b9r","depends_on_id":"interface-8rm","type":"blocks","created_at":"2026-02-09T14:45:35.71205096-05:00","created_by":"David Bau"}]}
{"id":"interface-cdp","title":"Special Levels: Build C binary and set up trace collection infrastructure","description":"Build the C NetHack binary via setup.sh. Extend or create gen_special_sessions.py to capture typGrid traces for special levels across all branches. The current gen_map_sessions.py only handles main dungeon depths 1-N via Ctrl+V teleport. Special levels require branch-aware navigation (wizard goto, branch teleport). Output: session JSON files with branch/level metadata.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:12:59.737234044-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:34.050139466-05:00","closed_at":"2026-02-09T08:38:34.050139466-05:00","close_reason":"Closed","labels":["infrastructure"]}
{"id":"interface-d0r","title":"Port Gnomish Mines levels (minetown variants, mines end) to JavaScript","description":"Port Mines special levels: minetown (town, orcish-town, bazaar variants), mines end (4 variants). These have fixed maps with shops, temples, and specific NPCs. Test against C traces. Variant selection is seed-dependent.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.905735346-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:34.708364714-05:00","labels":["port-level","tier2"],"dependencies":[{"issue_id":"interface-d0r","depends_on_id":"interface-uc4","type":"blocks","created_at":"2026-02-09T08:14:34.881035365-05:00","created_by":"David Bau"},{"issue_id":"interface-d0r","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T08:14:34.947597386-05:00","created_by":"David Bau"},{"issue_id":"interface-d0r","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.592979295-05:00","created_by":"David Bau"}]}
{"id":"interface-ecx","title":"Port Fort Ludios (knox) to JavaScript","description":"Port the Fort Ludios (knox) level to JavaScript. Single fixed map with soldiers, barracks, treasure. Test against C traces.","status":"closed","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.76352615-05:00","created_by":"David Bau","updated_at":"2026-02-09T15:08:41.763452842-05:00","closed_at":"2026-02-09T15:08:41.763452842-05:00","close_reason":"Completed: Knox level fully implemented and tested. Used basic des.* API (terrain, objects, traps) which was sufficient without needing full rooms API.","labels":["port-level","ready","tier1"],"dependencies":[{"issue_id":"interface-ecx","depends_on_id":"interface-3xt","type":"blocks","created_at":"2026-02-09T08:14:34.582351476-05:00","created_by":"David Bau"},{"issue_id":"interface-ecx","depends_on_id":"interface-0yz","type":"blocks","created_at":"2026-02-09T08:14:34.665805202-05:00","created_by":"David Bau"},{"issue_id":"interface-ecx","depends_on_id":"interface-3br","type":"blocks","created_at":"2026-02-09T14:27:13.268464416-05:00","created_by":"David Bau"}]}
{"id":"interface-eyq","title":"Implement combat item mechanics (weapons, armor, to-hit, damage)","description":"Complete the combat system to use weapon and armor properties correctly.\n\nComponents:\n- Weapon damage calculation (small vs large monsters)\n- To-hit bonuses (weapon enchantment, strength, dexterity)\n- Armor class calculation (worn armor, rings, enchantments)\n- Weapon skill system (basic, skilled, expert)\n- Weapon material types (iron, silver, wood) vs monster types\n- Two-weapon combat, ranged weapons (bows, slings)\n- Blessed weapons vs undead/demons bonus\n\nC reference:\n- weapon.c: hitval(), dmgval()\n- uhitm.c: player attack calculations\n- do_wear.c: AC calculations from armor\n\nTest cases:\n- +1 weapon gives +1 to-hit and +1 damage\n- Blessed weapon extra damage vs undead\n- Silver weapon extra damage vs silver-haters\n- Armor enchantment affects AC correctly\n- High dexterity improves to-hit\n- Weapon skill affects damage\n\nPriority: P1 (critical for gameplay)","status":"open","priority":1,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:24.300189819-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:24.300189819-05:00","dependencies":[{"issue_id":"interface-eyq","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:30.778720408-05:00","created_by":"David Bau"}]}
{"id":"interface-fbb","title":"Altar usage: Sacrifice, BUC testing, alignment management","description":"Use altars strategically for BUC testing, sacrificing for gifts, and alignment management. Altars are critical for mid-game progression.\n\nCurrent status:\n- ‚ö† Agent can detect altars (terrain feature)\n- ‚úó No altar interaction\n- ‚úó No sacrifice mechanics\n- ‚úó No BUC testing\n\nNeeded:\n- Drop items on altar to test BUC status\n- Sacrifice corpses for divine gifts\n- Convert altars if needed\n- Request divine protection (AC bonus)\n- Know when to sacrifice vs when to pray\n- Track god anger and alignment record","notes":"Test: Agent uses altar for BUC testing, gets artifact gift from god\n\nSpoiler guide: Sacrifice mechanics, divine gifts, BUC testing, alignment\n\nParent epic: interface-8m3","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:43:18.922851291-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:43:18.922851291-05:00","dependencies":[{"issue_id":"interface-fbb","depends_on_id":"interface-l9c","type":"blocks","created_at":"2026-02-09T14:43:49.802281886-05:00","created_by":"David Bau"}]}
{"id":"interface-gja","title":"Create item interaction test framework","description":"Build comprehensive test infrastructure for item interactions.\n\nComponents:\n- Unit tests for each item type\n- Integration tests for item combinations\n- BUC status test matrix\n- Combat simulation tests\n- Session replay tests for item usage\n\nTest structure:\n- test/unit/items/ - Per-item-type tests\n  - food.test.js - Eating tests\n  - potions.test.js - Potion effect tests\n  - scrolls.test.js - Scroll effect tests\n  - wands.test.js - Wand/ray tests\n  - rings.test.js - Ring effect tests\n  - weapons.test.js - Combat tests\n  - armor.test.js - AC calculation tests\n\n- test/integration/items/ - Cross-item tests\n  - buc_effects.test.js - BUC affects all items\n  - identification.test.js - ID methods\n  - combat_items.test.js - Weapons vs armor\n\n- test/comparison/items/ - C parity tests\n  - Item session replays from C harness\n  - RNG alignment for item effects\n\nPriority: P1 (needed before implementing features)","status":"open","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:26:06.206711072-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:26:06.206711072-05:00","dependencies":[{"issue_id":"interface-gja","depends_on_id":"interface-4ax","type":"blocks","created_at":"2026-02-09T14:26:30.499357637-05:00","created_by":"David Bau"}]}
{"id":"interface-gjg","title":"Port Rogue level and Bigroom to JavaScript","description":"Port the Rogue level (emulates classic Rogue aesthetics) and Bigroom variants (large open room). These appear at computed depths in the main dungeon. Test against C traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.529285834-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.175159126-05:00","labels":["complex","port-level","tier3"]}
{"id":"interface-kr2","title":"Special Levels: Collect C traces for Elemental Planes (astral, water, fire, air, earth)","description":"Capture typGrid traces for the Elemental Planes branch: astral plane, water/fire/air/earth planes. These are endgame levels with unique layouts.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.485049668-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:18.485049668-05:00","labels":["traces"],"dependencies":[{"issue_id":"interface-kr2","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.777609107-05:00","created_by":"David Bau"}],"comments":[{"id":1,"issue_id":"interface-kr2","author":"David Bau","text":"Elemental Planes: Ctrl+V blocked by In_endgame() check. Also #dumpmap may not work on endgame levels. Need alternative approach.","created_at":"2026-02-09T13:38:19Z"}]}
{"id":"interface-l9c","title":"Inventory management: Identify items, organize, use consumables","description":"Agent needs comprehensive inventory management to use items effectively and identify unknown items.\n\nCurrent status:\n- ‚úì Basic inventory parsing\n- ‚úì Finding healing potions, food\n- ‚ö† No item identification\n- ‚úó No scroll/wand/ring usage\n- ‚úó No item organization\n\nNeeded:\n- Price identification in shops\n- Engrave-testing for wand types\n- Scroll/potion identification strategies\n- Smart item usage (teleport scrolls, speed boots, etc.)\n- Drop useless items, organize valuable ones\n- BUC status tracking (blessed/uncursed/cursed)","notes":"Test: Agent identifies and uses key items (healing, gain level, teleport, etc.)\n\nSpoiler guide: Extensive item identification strategies, BUC status, item effects\n\nParent epic: interface-8m3","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:43:03.663157839-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:43:03.663157839-05:00","dependencies":[{"issue_id":"interface-l9c","depends_on_id":"interface-6ng","type":"blocks","created_at":"2026-02-09T14:43:49.404820837-05:00","created_by":"David Bau"}]}
{"id":"interface-llb","title":"Fix Sokoban spoiler map DECgraphics accuracy","description":"The spoiler guide Sokoban maps have 67 DECgraphics inaccuracies compared to actual C NetHack output:\n\n- 51 junction wall errors: spoiler uses plain ‚îÇ or ‚îÄ where C generates T-junctions (‚îú, ‚î§, ‚î¨, ‚î¥)\n- 4 corner-vs-junction errors: spoiler has T-junction where C generates corner (‚îå, ‚îê)\n- 12 staircase discrepancies: extra/shifted stair positions\n\nRoot cause: The spoiler author drew walls visually without applying NetHack's wall_extends() algorithm, which checks directional wall compatibility (horizontal walls only extend horizontally, vertical walls only extend vertically).\n\nA wall computation script was started at test/comparison/maps/compute_sokoban_walls.py but has convergence issues on some maps (soko4-2, soko3-2, soko2-1). The algorithm needs debugging before mass-updating the spoiler guide.\n\nSee detailed analysis in earlier session logs for exact mismatch locations across all 8 level variants.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T11:01:19.589443121-05:00","created_by":"David Bau","updated_at":"2026-02-09T11:01:19.589443121-05:00"}
{"id":"interface-lsj","title":"Implement place_lregion for depth 2+ map generation","description":"Implement place_lregion() function to fix remaining 6 test failures.\n\nRoot cause: All failing tests are depth 2+ map generation issues.\n\n**Phase 1: Minimal Implementation (Gnomish Mines)**\n- Implement place_lregion() in dungeon.js\n- Implement put_lregion_here() helper\n- Implement bad_location() checker  \n- Implement is_exclusion_zone() stub\n- Call from test helpers after makelevel for depth 2-4\n\n**Expected Impact**: \n- Fixes seed119_maps_c.session.json (depth 2 RNG alignment)\n- Fixes seed72_maps_c.session.json (depth 2 RNG alignment)\n- May enable seed1.session.json steps 67-71\n\n**C Reference**: nethack-c/src/mkmaze.c:356-469\n\n**Test Command**: node --test test/comparison/session_runner.test.js","notes":"**Implementation Complete**: place_lregion and helpers implemented in dungeon.js.\n\n**RNG Alignment Verified**: place_lregion produces EXACT RNG sequence matching C:\n- seed119 depth 2: rn2(79)=50, rn2(21)=9, ... matches perfectly\n- Called at depths 2-4 after wallification\n\n**Current Test Results**: 1095 pass / 69 fail (was 1097/67)\n- -2 tests due to place_lregion changing RNG sequence\n- This is expected: reveals OTHER depth 2+ issues\n\n**Root Cause of Remaining Failures**:\n- JS is missing ~40 RNG calls BEFORE place_lregion at depth 2\n- place_lregion itself is CORRECT\n- Need to investigate what happens early in depth 2 generation\n\n**Next Steps**:\n1. Identify the 40 missing RNG calls at depth 2\n2. Implement full Is_branchlev logic for depths 5+\n3. Investigate depth 2 map structure differences","status":"closed","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:37:08.031271121-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:45:57.583638489-05:00","closed_at":"2026-02-09T14:45:57.583638489-05:00","close_reason":"place_lregion implementation is complete and verified. RNG sequence matches C exactly. Test regression (-2 tests) is due to SEPARATE issue: missing mineralize object creation calls at depth 2. See notes for details."}
{"id":"interface-lu1","title":"Implement item identification system","description":"Implement the item identification and discovery system.\n\nComponents:\n- Type identification (what is this potion/scroll/wand?)\n- BUC identification (is it blessed/cursed/uncursed?)\n- Enchantment identification (weapon/armor +/- value)\n- Name discovery (random appearances vs true names)\n- Identification methods (scrolls, shops, use-ID, #name command)\n- Call command (name items)\n\nIdentification methods:\n- Scroll of identify (main method)\n- Using item reveals its type (use-identification)\n- Shopkeeper pricing reveals BUC status\n- Stethoscope shows monster inventory\n- #name command for player naming\n\nC reference:\n- invent.c: identification flags\n- objnam.c: doname(), naming system\n- do_name.c: #name command\n\nTest cases:\n- Unidentified potion shows random appearance\n- After drinking, potion type is identified\n- Scroll of identify reveals type + BUC + enchantment\n- Named items display custom names\n- Discovered items show in #conduct list","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:56.326157175-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:56.326157175-05:00","dependencies":[{"issue_id":"interface-lu1","depends_on_id":"interface-14z","type":"blocks","created_at":"2026-02-09T14:26:36.631958325-05:00","created_by":"David Bau"},{"issue_id":"interface-lu1","depends_on_id":"interface-uqf","type":"blocks","created_at":"2026-02-09T14:26:36.722915485-05:00","created_by":"David Bau"},{"issue_id":"interface-lu1","depends_on_id":"interface-q6u","type":"blocks","created_at":"2026-02-09T14:26:36.816580869-05:00","created_by":"David Bau"}]}
{"id":"interface-mgv","title":"Gehennom navigation: Mazes, demon lords, Wizard's Tower","description":"Navigate Gehennom (Hell, Dlvl 20-50+), handle demon lords, find Wizard's Tower, reach Valley of the Dead. Most dangerous part of descent.\n\nChallenges:\n- Complex maze levels\n- Powerful demon lords (Juiblex, Asmodeus, etc.)\n- No-teleport levels\n- Wizard of Yendor harassment\n- Vlad's Tower (get Candelabrum)\n\nStrategies:\n- Follow left/right wall in mazes\n- Avoid demon lairs when possible\n- Use conflict for mob control\n- Levitation for lava/water","notes":"Test: Agent navigates through Gehennom to reach Moloch's Sanctum\n\nSpoiler guide: Gehennom layout, demon lords, Wizard's Tower, Valley\n\nParent epic: interface-8m3","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:43:31.016176691-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:43:31.016176691-05:00","dependencies":[{"issue_id":"interface-mgv","depends_on_id":"interface-24i","type":"blocks","created_at":"2026-02-09T14:43:50.196435612-05:00","created_by":"David Bau"},{"issue_id":"interface-mgv","depends_on_id":"interface-fbb","type":"blocks","created_at":"2026-02-09T14:43:50.294415755-05:00","created_by":"David Bau"}]}
{"id":"interface-mr1","title":"Port Sanctum level to JavaScript","description":"Port the Sanctum level (Moloch's Sanctum) to JavaScript. Endgame temple with high priest and Amulet of Yendor placement. Test against C traces.","status":"closed","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.318767894-05:00","created_by":"David Bau","updated_at":"2026-02-09T15:18:30.908450349-05:00","closed_at":"2026-02-09T15:18:30.908450349-05:00","close_reason":"Completed: Sanctum level fully implemented and tested. Enhanced des API to support random object/monster/trap placement. All tests passing (2/2).","labels":["gehennom","port-level","tier4"]}
{"id":"interface-n7u","title":"Implement wand effects (zap command)","description":"Implement wand zapping with ray/beam mechanics and all wand effects.\n\nComponents:\n- Zap command (z key) with wand selection and direction\n- Ray/beam mechanics (line-of-sight, reflections, bouncing)\n- All wand types and their effects\n- Wand charges (limited uses, recharging)\n- BUC affects recharging success\n- Wand breaking and explosion\n\nKey wands:\n- Death, Lightning, Fire, Cold (damage rays)\n- Striking (physical damage ray)\n- Sleep, Slow monster, Polymorph\n- Wishing (special, limited charges)\n- Teleportation, Cancellation, Make invisible\n\nC reference:\n- zap.c: dozap(), bhit() for ray mechanics\n- wand.c: wand-specific code\n\nTest cases:\n- Death ray kills monsters in line\n- Rays reflect off walls correctly\n- Wand of wishing has 1-3 charges\n- Recharged wand might explode (cursed risky)\n- Engraving with wands consumes charge","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:13.696658671-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:13.696658671-05:00","dependencies":[{"issue_id":"interface-n7u","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:31.191858901-05:00","created_by":"David Bau"}]}
{"id":"interface-oqg","title":"Dungeon navigation: Multi-level memory, branch exploration","description":"Agent must navigate multi-level dungeon, remember level layouts, find branches (Mines, Sokoban), and backtrack when needed.\n\nCurrent status:\n- ‚úì Single-level pathfinding (A*, BFS)\n- ‚úì Basic stair usage (descent)\n- ‚ö† Limited multi-level memory\n- ‚úó No branch detection\n- ‚úó No strategic backtracking\n\nNeeded:\n- Recognize branch entry points (Mines on Dlvl 2-4, Sokoban on Dlvl 6-10)\n- Remember which levels have unexplored areas\n- Strategic ascent for shops, altars, fountains\n- Oracle visit (Dlvl 5)\n- Track critical landmarks","notes":"Test: Agent finds and enters Mines, visits Oracle, backtracks to unexplored levels\n\nSpoiler guide: Branch locations, landmark importance\n\nParent epic: interface-8m3","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:43:09.143042414-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:43:09.143042414-05:00","dependencies":[{"issue_id":"interface-oqg","depends_on_id":"interface-6ng","type":"blocks","created_at":"2026-02-09T14:43:49.610052693-05:00","created_by":"David Bau"},{"issue_id":"interface-oqg","depends_on_id":"interface-l9c","type":"blocks","created_at":"2026-02-09T14:43:49.707443635-05:00","created_by":"David Bau"}]}
{"id":"interface-pnh","title":"Implement Selection API for geometric map operations","description":"Create selection API for coordinate set operations used by complex special levels: selection.new(), selection.area(), selection.rect(), selection.line(), selection.rndcoord(), selection.grow(), selection.negate(), selection.percentage(), selection.floodfill(), selection.match(), selection.filter_mapchar(). Supports union/intersection/complement. C ref: sp_lev.c selection functions. Needed for Castle, Gehennom, and complex levels.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:33.289096727-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.894569239-05:00","labels":["des-api","infrastructure"]}
{"id":"interface-q6u","title":"Implement scroll effects (read command)","description":"Implement scroll reading with all scroll effects.\n\nComponents:\n- Read command (r key) with scroll selection\n- All scroll types and their effects\n- BUC modifies scroll effects (blessed stronger, cursed backfires)\n- Illiteracy prevention (cursed items, low intelligence)\n- Scroll blanking (water, cancellation)\n- Ink cost for magic marker\n\nKey scrolls:\n- Identify (BUC affects # of items identified)\n- Enchant weapon/armor (BUC affects success/failure)\n- Remove curse, Teleportation, Magic mapping\n- Create monster, Taming, Genocide\n- Punishment (cursed scrolls create problems)\n\nC reference:\n- read.c: read_scroll(), seffects()\n- objnam.c: scroll naming\n\nTest cases:\n- Blessed identify IDs multiple items\n- Cursed enchant weapon might worsen item\n- Reading while confused randomizes effect\n- Blank scrolls do nothing\n- Illiterate characters can't read","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:25:03.30482534-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:25:03.30482534-05:00","dependencies":[{"issue_id":"interface-q6u","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:31.091194438-05:00","created_by":"David Bau"}]}
{"id":"interface-qah","title":"Special Levels: Collect C traces for main dungeon specials (oracle, medusa, castle, bigroom, rogue)","description":"Capture typGrid traces for special levels within the Dungeons of Doom: oracle level, medusa level, castle, bigroom, rogue level. These are at computed depths in the main dungeon. Use wizard teleport to reach them.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.269664188-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.850604672-05:00","closed_at":"2026-02-09T08:38:41.850604672-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-qah","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.551586738-05:00","created_by":"David Bau"}]}
{"id":"interface-sey","title":"Port Vlad's Tower levels (tower1-3) to JavaScript","description":"Port Vlad's Tower level definitions to JavaScript. Small fixed maps (3 levels). Tower has unique properties (no teleport, connected vertically). Test against C traces.","status":"closed","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.69415831-05:00","created_by":"David Bau","updated_at":"2026-02-09T15:08:31.534706291-05:00","closed_at":"2026-02-09T15:08:31.534706291-05:00","close_reason":"Completed: Tier 1 special levels implemented with comprehensive tests. Tower1-3, Valley, and Knox all pass unit tests with C trace validation.","labels":["port-level","ready","tier1"],"dependencies":[{"issue_id":"interface-sey","depends_on_id":"interface-3xt","type":"blocks","created_at":"2026-02-09T08:14:34.408694429-05:00","created_by":"David Bau"},{"issue_id":"interface-sey","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:34.482154553-05:00","created_by":"David Bau"}]}
{"id":"interface-swb","title":"Ascension run: Escape with Amulet, Elemental Planes, Astral","description":"Final challenge: escape back through dungeon with Amulet while Wizard harasses, navigate Elemental Planes (Earth, Air, Fire, Water), reach Astral Plane, offer Amulet to god.\n\nChallenges:\n- Wizard harassment (teleports player, summons nasties)\n- Elemental Plane navigation (Air requires levitation, Water needs swimming, etc.)\n- Astral Plane: three altars, must choose correct alignment\n- Death riders and high priests on Astral\n\nVictory condition: Successfully offer Amulet at correct altar.","notes":"Test: Agent achieves ascension!\n\nSpoiler guide: Ascension run strategies, Elemental Plane tactics, Astral Plane\n\nParent epic: interface-8m3","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:43:37.613473714-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:43:37.613473714-05:00","dependencies":[{"issue_id":"interface-swb","depends_on_id":"interface-6y3","type":"blocks","created_at":"2026-02-09T14:43:50.503125561-05:00","created_by":"David Bau"}]}
{"id":"interface-t9m","title":"Port Gehennom demon lair levels (juiblex, baalzebub, asmodeus, orcus) to JavaScript","description":"Port the four demon lair special levels in Gehennom. Each has a unique layout with a demon lord boss. Test against C traces.","status":"open","priority":3,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:53.24705288-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:27:35.274655873-05:00","labels":["gehennom","port-level","tier4"]}
{"id":"interface-u4r","title":"Port Valley of the Dead to JavaScript","description":"Port the Valley of the Dead level to JavaScript. Entry point to Gehennom with fixed layout. Test against C traces.","status":"closed","priority":1,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:52.9764279-05:00","created_by":"David Bau","updated_at":"2026-02-09T15:08:31.570671865-05:00","closed_at":"2026-02-09T15:08:31.570671865-05:00","close_reason":"Completed: Tier 1 special levels implemented with comprehensive tests. Tower1-3, Valley, and Knox all pass unit tests with C trace validation.","labels":["port-level","ready","tier1"],"dependencies":[{"issue_id":"interface-u4r","depends_on_id":"interface-3xt","type":"blocks","created_at":"2026-02-09T08:14:35.018746164-05:00","created_by":"David Bau"},{"issue_id":"interface-u4r","depends_on_id":"interface-8a7","type":"blocks","created_at":"2026-02-09T08:14:35.097629215-05:00","created_by":"David Bau"}]}
{"id":"interface-uc4","title":"Special Levels: Collect C traces for Gnomish Mines (minetown variants, mines end)","description":"Capture typGrid traces for Gnomish Mines special levels: minetown (multiple variants: town, orcish, bazaar), mines end (multiple variants). Use wizard mode to navigate to Mines branch. Multiple seeds for variant coverage.","status":"closed","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.12719295-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:38:41.686433542-05:00","closed_at":"2026-02-09T08:38:41.686433542-05:00","close_reason":"Closed","labels":["traces"],"dependencies":[{"issue_id":"interface-uc4","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.401202603-05:00","created_by":"David Bau"}]}
{"id":"interface-uqf","title":"Implement potion effects (quaff command)","description":"Implement potion drinking with all potion effects.\n\nComponents:\n- Quaff command (q key) with potion selection\n- All potion types and their effects\n- BUC modifies potion potency/duration\n- Potion identification system\n- Dilution (dipping in fountains/water)\n- Throwing potions (vapor effects)\n\nKey potions:\n- Healing/Extra Healing (HP restoration, BUC affects amount)\n- Gain Ability (stat increase)\n- Confusion, Blindness, Paralysis (timed effects)\n- Speed, Levitation, Invisibility (intrinsics)\n- Water (dilution, blanking scrolls)\n\nC reference:\n- potion.c: dopotion(), peffects()\n- objnam.c: potion naming\n\nTest cases:\n- Blessed healing restores more HP\n- Cursed gain ability might decrease stats\n- Potion effects stack correctly with intrinsics\n- Diluted potions have reduced effects","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:24:53.716052403-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:24:53.716052403-05:00","dependencies":[{"issue_id":"interface-uqf","depends_on_id":"interface-wc8","type":"blocks","created_at":"2026-02-09T14:26:30.988588995-05:00","created_by":"David Bau"}]}
{"id":"interface-vc2","title":"Special Levels: Collect C traces for Quest levels (13 roles √ó 3 levels)","description":"Capture typGrid traces for Quest branch special levels: start, locate, goal for all 13 roles. This requires starting the game with different role selections. Largest trace collection task (39 unique levels).","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:13:18.411177427-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:13:18.411177427-05:00","labels":["traces"],"dependencies":[{"issue_id":"interface-vc2","depends_on_id":"interface-cdp","type":"blocks","created_at":"2026-02-09T08:14:23.70252155-05:00","created_by":"David Bau"}]}
{"id":"interface-wc8","title":"Implement BUC (Blessed/Uncursed/Cursed) status system","description":"Implement the core BUC status system that affects all item behaviors.\n\nKey components:\n- BUC status flags on all objects (obj.blessed, obj.cursed)\n- BUC identification state (known vs unknown)\n- Visual indicators for BUC status when identified\n- BUC status affects: food nutrition, potion effects, scroll effects, armor AC, weapon damage/to-hit\n\nC reference:\n- objclass.h: BUC flags\n- do_wear.c, eat.c, potion.c: BUC effect modifiers\n\nTest cases:\n- Blessed food gives more nutrition\n- Cursed armor gives worse AC\n- Cursed items cannot be unwielded/removed\n- BUC status display in inventory\n\nDependencies: None (foundational)","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:24:33.651890335-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:24:33.651890335-05:00","dependencies":[{"issue_id":"interface-wc8","depends_on_id":"interface-4ax","type":"blocks","created_at":"2026-02-09T14:26:30.684493483-05:00","created_by":"David Bau"}]}
{"id":"interface-wdp","title":"Implement inventory commands (i, pickup, drop)","description":"Inventory sessions (seed42_inventory_wizard, seed42_inventory_wizard_pickup) need inventory display and manipulation commands implemented.","notes":"Quick win: 4 tests. Would bring pass rate to 94.3%.","status":"open","priority":2,"issue_type":"feature","owner":"david.bau@gmail.com","created_at":"2026-02-09T14:33:19.046170012-05:00","created_by":"David Bau","updated_at":"2026-02-09T14:33:19.046170012-05:00"}
{"id":"interface-wzo","title":"Add special level comparison tests to session_runner.test.js","description":"Extend the test framework to handle special level session files. Compare JS-generated special level typGrids against C traces. Support branch-aware session format. Report terrain mismatches with readable names. Coverage: all special levels with collected traces.","status":"open","priority":2,"issue_type":"task","owner":"david.bau@gmail.com","created_at":"2026-02-09T08:14:02.84554526-05:00","created_by":"David Bau","updated_at":"2026-02-09T08:14:02.84554526-05:00","labels":["infrastructure"],"dependencies":[{"issue_id":"interface-wzo","depends_on_id":"interface-650","type":"blocks","created_at":"2026-02-09T08:14:35.762804155-05:00","created_by":"David Bau"}]}
